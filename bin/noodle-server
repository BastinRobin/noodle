#!/usr/bin/env node

var connect = require('connect'),
    http    = require('http'),
    noodle  = require('../lib/noodle-middleware'),

    port    = process.argv[2] || require('../lib/config').serverPort,

    app     = connect()
              .use(connect.query())
              .use(connect.json())
              .use(noodle.handle)
              .use(noodle.finish);

http.createServer(app).listen(port, function () {
  console.log('noodling on ' + port);
});